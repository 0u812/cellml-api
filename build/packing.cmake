SET(CPACK_PACKAGE_DESCRIPTION_SUMMARY "The CellML SDK provides libraries for working with CellML models")
SET(CPACK_PACKAGE_VENDOR "Auckland Bioengineering Institute, The University of Auckland")
SET(CPACK_PACKAGE_DESCRIPTION_FILE "${CMAKE_CURRENT_SOURCE_DIR}/README")
SET(CMake_VERSION_MAJOR 1)
SET(CMake_VERSION_MINOR 12)
SET(GLOBAL_VERSION "${CMake_VERSION_MAJOR}.${CMake_VERSION_MINOR}")
SET(CPACK_PACKAGE_VERSION_MAJOR "1")
SET(CPACK_PACKAGE_VERSION_MINOR "12")
SET(CPACK_PACKAGE_VERSION_PATCH "1")
SET(CPACK_PACKAGE_INSTALL_DIRECTORY "cellml-sdk-${CMake_VERSION_MAJOR}.${CMake_VERSION_MINOR}")

IF(WIN32)
  SET(CPACK_GENERATOR "NSIS;ZIP")
  IF(MSVC)
    SET(CPACK_PACKAGE_FILE_NAME "cellml-sdk-${CMake_VERSION_MAJOR}.${CMake_VERSION_MINOR}-Win32-MSVC10")
  ELSE(MSVC)
    SET(CPACK_PACKAGE_FILE_NAME "cellml-sdk-${CMake_VERSION_MAJOR}.${CMake_VERSION_MINOR}-Win32-MingW")
  ENDIF(MSVC)
  INSTALL(FILES build/api-icon.ico DESTINATION icons)
  SET(CPACK_NSIS_MUI_ICON "${CMAKE_SOURCE_DIR}/build/api-icon.ico")
  SET(CPACK_NSIS_MUI_UNIICON "${CMAKE_SOURCE_DIR}/build/api-icon-uninst.ico")
  SET(CPACK_NSIS_COMPRESSOR "/SOLID lzma")
  SET(CPACK_NSIS_DISPLAY_NAME "CellML SDK")
  SET(CPACK_NSIS_DISPLAY_NAME "CellML SDK")
  SET(CPACK_NSIS_HELP_LINK "http://cellml.org/tools/api")
  SET(CPACK_NSIS_CONTACT "cellml-tools-developers@lists.cellml.org")
ELSE()
  IF (APPLE)
    SET(CPACK_PACKAGE_FILE_NAME "cellml-sdk-${CMake_VERSION_MAJOR}.${CMake_VERSION_MINOR}-Mac")
    SET(CPACK_BUNDLE_NAME "CellML SDK ${CMake_VERSION_MAJOR}.${CMake_VERSION_MINOR}")
    SET(CPACK_BUNDLE_ICON "build/api-icon.ico")
    SET(CPACK_BUNDLE_PLIST "${CMAKE_SOURCE_DIR}/build/sdk-bundle.plist")
    SET(CPACK_GENERATOR "Bundle")
  ELSE()
    SET(CPACK_PACKAGE_FILE_NAME "cellml-sdk-${CMake_VERSION_MAJOR}.${CMake_VERSION_MINOR}-Linux-${CMAKE_SYSTEM_PROCESSOR}")
    SET(CPACK_GENERATOR "TBZ2")
  ENDIF()
ENDIF()
INCLUDE(CPack)

ADD_CUSTOM_TARGET(release chmod "+x" "build/make-release" COMMAND build/make-release ${CMake_VERSION_MAJOR} ${CMake_VERSION_MINOR} ${CMAKE_BINARY_DIR})
